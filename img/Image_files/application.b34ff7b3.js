"use strict";function uint8ArrayToString(a){for(var b=a.length,c="",d=0;b>d;d+=65535){var e=65535;d+65535>b&&(e=b-d),c+=String.fromCharCode.apply(null,a.subarray(d,d+e))}return c}function getFormattedDate(){var a=new Date,b=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+" "+("0"+a.getHours()).slice(-2)+"-"+("0"+a.getMinutes()).slice(-2)+"-"+("0"+a.getSeconds()).slice(-2);return b}var pageDescriptions={home:"Online web based iOS Simulators and Android Emulators. Stream native mobile apps in the browser with html5 and javascript.",upload:"Upload an iOS or Android app to Appetize.io to stream instantly using online web based iOS Simulators and Android Emulators.",demo:"Demo Appetize.io's online web based iOS Simulators and Android Emulators directly in your browser.",docs:"Easily request and API token to gain programmatic access to Appetize.io's online web based iOS Simulators and Android Emulators.",moreInfo:"Pricing, terms, service level agreement, and other information regarding Appetize.io's online web based iOS Simulators and Android Emulators.",login:"Sign in to your Appetize.io account to update app settings, upload new builds, setup billing, and more.",reset:"Reset your Appetize.io account password.",signup:"Sign up for your Appetize.io account to update app settings, upload new builds, setup billing, and more.",terms:"Terms and policies regarding Appetize.io's online web based iOS Simulators and Android Emulators.",standalone:"Run Appetize.io as a barebones iOS Simulator or Android Emulator"};angular.module("appetizeApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap.accordion","angularFileUpload","ui.bootstrap","ui.tree","perfect_scrollbar","luegg.directives","mgcrea.ngStrap.affix","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions","ng-currency","ngclipboard","ngOrderObjectBy","anguFixedHeaderTable"]).config(["$routeProvider","$locationProvider","$httpProvider","$compileProvider",function(a,b,c,d){var e=["$q","$http","$location","$rootScope",function(a,b,c,d){var e=a.defer();return d.user?e.resolve():b.get("/api/user").success(function(a){a&&a.username?(d.loggedIn=!0,e.resolve()):(d.loggedIn=!1,e.reject(),d.isOnprem?c.url("/login"):0==c.path().indexOf("/manage/")?c.url("/login?reason=manage&next="+c.path()):0==c.path().indexOf("/debug/")?c.url("/login?reason=debug&next="+c.path()):0==c.path().indexOf("/standalone")?c.url("/login?reason=standalone&next="+c.path()):c.url("/login?next="+c.path()))}),e.promise}];d.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel|appetize\.io):/),a.when("/docs",{templateUrl:"views/docs.html",pageTitle:"Docs",pageDescription:pageDescriptions.docs,pageCanonical:"https://appetize.io/docs",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",pageTitle:"Sign in",pageDescription:pageDescriptions.login,pageCanonical:"https://appetize.io/login",controller:"MainCtrl"}).when("/app/:publicKey",{templateUrl:"views/app.html",pageTitle:"App",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"CanvasCtrl",reloadOnSearch:!1}).when("/standalone",{templateUrl:"views/standalone.html",pageTitle:"Standalone",pageDescription:pageDescriptions.standalone,pageCanonical:"https://appetize.io/",controller:"CanvasCtrl",reloadOnSearch:!1,resolve:{auth:e}}).when("/debug/:privateKey",{templateUrl:"views/debug.html",pageTitle:"Debug",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"CanvasCtrl",reloadOnSearch:!1,resolve:{auth:e}}).when("/manage/:privateKey",{templateUrl:"views/manage.html",pageTitle:"Manage",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"ManageCtrl",resolve:{auth:e}}).when("/embed/:publicKey",{templateUrl:"views/app.html",pageTitle:"Embed",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/embed",controller:"CanvasCtrl",reloadOnSearch:!1}),window.isOnprem?a.when("/",{templateUrl:"views/dashboard.html",pageTitle:"Dashboard",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"DashboardCtrl",resolve:{auth:e}}).when("/upload",{templateUrl:"views/upload.html",pageTitle:"Upload",pageDescription:pageDescriptions.upload,pageCanonical:"https://appetize.io/upload",controller:"UploadCtrl",resolve:{auth:e}}).when("/demo",{templateUrl:"views/demo.html",pageTitle:"Demo",pageDescription:pageDescriptions.demo,pageCanonical:"https://appetize.io/demo",controller:"CanvasCtrl",reloadOnSearch:!1,resolve:{auth:e}}).otherwise({pageTitle:"Appetize.io",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",redirectTo:"/"}):a.when("/",{templateUrl:"views/main.html",pageTitle:"Appetize.io",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl"}).when("/upload",{templateUrl:"views/upload.html",pageTitle:"Upload",pageDescription:pageDescriptions.upload,pageCanonical:"https://appetize.io/upload",controller:"UploadCtrl"}).when("/connect",{templateUrl:"views/connect.html",pageTitle:"ADB Connect",pageDescription:pageDescriptions.moreInfo,pageCanonical:"https://appetize.io/connect",controller:"MainCtrl"}).when("/demo",{templateUrl:"views/demo.html",pageTitle:"Demo",pageDescription:pageDescriptions.demo,pageCanonical:"https://appetize.io/demo",controller:"CanvasCtrl",reloadOnSearch:!1}).when("/pricing",{templateUrl:"views/pricing.html",pageTitle:"Pricing",pageDescription:pageDescriptions.moreInfo,pageCanonical:"https://appetize.io/pricing",controller:"MainCtrl"}).when("/reset",{templateUrl:"views/reset.html",pageTitle:"Reset your password",pageDescription:pageDescriptions.reset,pageCanonical:"https://appetize.io/reset",controller:"ResetCtrl"}).when("/signup",{templateUrl:"views/signup.html",pageTitle:"Sign up",pageDescription:pageDescriptions.signup,pageCanonical:"https://appetize.io/signup",controller:"MainCtrl"}).when("/terms-and-policies",{templateUrl:"views/terms-and-policies.html",pageTitle:"Terms and policies",pageDescription:pageDescriptions.terms,pageCanonical:"https://appetize.io/terms-and-policies",controller:"MainCtrl"}).when("/dashboard",{templateUrl:"views/dashboard.html",pageTitle:"Dashboard",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"DashboardCtrl",resolve:{auth:e}}).when("/account",{templateUrl:"views/account.html",pageTitle:"Account",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl",resolve:{auth:e}}).when("/register",{templateUrl:"views/register.html",pageTitle:"Register",pageDescription:pageDescriptions.signup,pageCanonical:"https://appetize.io/register",controller:"MainCtrl"}).when("/invite",{templateUrl:"views/invite.html",pageTitle:"Invite",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl"}).when("/success",{templateUrl:"views/success.html",pageTitle:"Success",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",controller:"MainCtrl"}).when("/x",{pageTitle:"Exclude",templateUrl:"/views/exclude.html"}).otherwise({pageTitle:"Appetize.io",pageDescription:pageDescriptions.home,pageCanonical:"https://appetize.io/",redirectTo:"/"}),b.html5Mode(!0),b.hashPrefix("!"),c.interceptors.push(["$q","$location",function(a,b){return{responseError:function(c){return 401==c.status&&"/login"!=b.path()&&(window.isOnprem?b.url("/login"):b.url("/login?reason=unauthorized")),a.reject(c)}}}])}]).directive("preloadResource",["$rootScope",function(a){return{link:function(b,c,d){a.loggedIn=JSON.parse(d.preloadResource),c.remove()}}}]).directive("preloadDeviceconfig",["$rootScope",function(a){return{link:function(b,c,d){a.deviceConfig=JSON.parse(d.preloadDeviceconfig),c.remove()}}}]).directive("preloadIsonprem",["$rootScope",function(a){return{link:function(b,c,d){a.isOnprem=JSON.parse(d.preloadIsonprem),c.remove()}}}]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeSuccess",function(b,c,d){c.$$route&&(a.isOnprem?(a.pageTitle="",a.pageDescription="",a.pageCanonical=""):(a.pageTitle=c.$$route.pageTitle,a.pageDescription=c.$$route.pageDescription,a.pageCanonical=c.$$route.pageCanonical)),toastr.remove()})}]),angular.module("appetizeApp").controller("MainCtrl",["$scope","$rootScope","$modal","$location","$anchorScroll","AuthService",function(a,b,c,d,e,f){console.log("MainCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",e()}]),angular.module("appetizeApp").controller("DocsCtrl",["$scope","$rootScope","$modal","$http","$location","$anchorScroll","$timeout","appConstants",function(a,b,c,d,e,f,g,h){function i(){return a.screenOnly?"portrait"==a.orientation?Math.ceil(h.screenDimensions[a.device].width*a.scale/100):Math.ceil(h.screenDimensions[a.device].height*a.scale/100):"portrait"==a.orientation?Math.ceil(h.deviceDimensions[a.device].width*a.scale/100):Math.ceil(h.deviceDimensions[a.device].height*a.scale/100)}function j(){return a.screenOnly?"portrait"==a.orientation?Math.ceil(h.screenDimensions[a.device].height*a.scale/100):Math.ceil(h.screenDimensions[a.device].width*a.scale/100):"portrait"==a.orientation?Math.ceil(h.deviceDimensions[a.device].height*a.scale/100):Math.ceil(h.deviceDimensions[a.device].width*a.scale/100)}console.log("DocsCtrl loaded"),a.device="iphone5s",a.deviceColor="black",a.autoplay=!1,a.screenOnly=!1,a.xdocMsg=!1,a.scale=100,a.orientation="portrait",a.width=378,a.height=800,a.$watch("device",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("orientation",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("scale",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("screenOnly",function(b,c){b!==c&&(a.width=i(),a.height=j())},!1),a.$watch("paramsInput",function(b,c){if(b!==c)if(b)try{var d=JSON.parse(b);"object"==typeof d?(a.paramsError=!1,a.params=encodeURIComponent(b.replace(/\s+/g,""))):(a.params=null,a.paramsError=!0)}catch(e){a.params=null,a.paramsError=!0}else a.params=null,a.paramsError=!1},!1),a.setLanguage=function(b){a.language=b},a.status={isopen:!1},a.languages=["de","en","fr","it","ja","ko","pt","ru"],a.token=function(){a.apiForm.$valid&&!a.success&&d.post("/api/apiToken/create",a.formData).success(function(c){a.success=!0,b.recordEvent("api_token_created"+a.device)}).error(function(b){a.error.token=!0})},a.apiExamples={creating:JSON.stringify({token:"tok_aeroh5Cieshai4noo1al",url:"http://www.example.com/my_app.zip",platform:"ios"},null,2),updating:JSON.stringify({token:"tok_aeroh5Cieshai4noo1al",url:"http://www.example.com/my_app.zip",platform:"ios",privateKey:"private_DjksalfjDKFJLKsdj"},null,2),response:JSON.stringify({privateKey:"private_Djksfj",publicKey:"sKdfjL",appURL:"https://appetize.io/app/sKdfjL",manageURL:"https://appetize.io/manage/private_Djksfj"},null,2)},a.scrollToId=function(a){e.hash(a),f()},g(f,20)}]),angular.module("appetizeApp").controller("TermsCtrl",["$scope","$anchorScroll","$location",function(a,b,c){console.log("TermsCtrl loaded"),a.scrollToId=function(a){c.hash(a),b()},b()}]),angular.module("appetizeApp").controller("DemoCtrl",["$scope","$rootScope","$modal","$location","$anchorScroll",function(a,b,c,d,e){console.log("DemoCtrl loaded")}]),angular.module("appetizeApp").controller("ManageCtrl",["$scope","$rootScope","$routeParams","$timeout","$upload","$parse","$http","$modal","$location","$anchorScroll","$window","appConstants",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){g.get("/api/account").then(function(b){a.account=b.data})}function n(){b.app&&(b.app.disableHome||(b.app.disableHome=!1),b.app.disabled||(b.app.disabled=!1),b.app.protectedByAccount||(b.app.protectedByAccount=!1),b.app.timeout||(b.app.timeout=a.account.timeout||120),b.app.useLastFrame||(b.app.useLastFrame=!1),b.app.preLaunchButtonTextColor||(b.app.preLaunchButtonTextColor="#ffffff"),b.app.preLaunchButtonBackgroundColor||(b.app.preLaunchButtonBackgroundColor="#009ddc"),b.app.preLaunchButtonBackgroundOpacity||(b.app.preLaunchButtonBackgroundOpacity="0.5"),b.app.postSessionButtonTextColor||(b.app.postSessionButtonTextColor="#ffffff"),b.app.postSessionButtonBackgroundColor||(b.app.postSessionButtonBackgroundColor="#009ddc"),b.app.postSessionButtonBackgroundOpacity||(b.app.postSessionButtonBackgroundOpacity="0.5")),d(function(){jscolor.bind(),updateJsColor()},500)}console.log("ManageCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width";var o=new X2JS;a.appConstants=l,a.account,m(),a.disabled={},a.pageConfig={},a.fieldChanged={},a.fieldChangeSuccess={},c.privateKey&&g.get("/api/app/"+c.privateKey+"/manage").success(function(c){b.app=c,n(),a.logMonths=[];for(var d=new Date,e=new Date(d.getFullYear(),d.getMonth(),1);e>new Date(b.app.created);)a.logMonths.push(new Date(e)),e.setMonth(e.getMonth()-1);a.logMonths.push(new Date(e)),a.logMonth=a.logMonths[0],a.$watch("app.buttonText",function(b,c){b!==c&&(a.fieldChangeSuccess.buttonText=!1,a.fieldChanged.buttonText=!0)},!1),a.$watch("app.preLaunchButtonTextColor",function(b,c){b!==c&&(a.fieldChangeSuccess.preLaunchButtonTextColor=!1,a.fieldChanged.preLaunchButtonTextColor=!0)},!1),a.$watch("app.preLaunchButtonBackgroundColor",function(b,c){b!==c&&(a.fieldChangeSuccess.preLaunchButtonBackgroundColor=!1,a.fieldChanged.preLaunchButtonBackgroundColor=!0)},!1),a.$watch("app.preLaunchButtonBackgroundOpacity",function(b,c){b!==c&&(a.fieldChangeSuccess.preLaunchButtonBackgroundOpacity=!1,a.fieldChanged.preLaunchButtonBackgroundOpacity=!0)},!1),a.$watch("app.postSessionButtonText",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonText=!1,a.fieldChanged.postSessionButtonText=!0)},!1),a.$watch("app.postSessionButtonTextColor",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonTextColor=!1,a.fieldChanged.postSessionButtonTextColor=!0)},!1),a.$watch("app.postSessionButtonBackgroundColor",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonBackgroundColor=!1,a.fieldChanged.postSessionButtonBackgroundColor=!0)},!1),a.$watch("app.postSessionButtonBackgroundOpacity",function(b,c){b!==c&&(a.fieldChangeSuccess.postSessionButtonBackgroundOpacity=!1,a.fieldChanged.postSessionButtonBackgroundOpacity=!0)},!1),a.$watch("app.launchUrl",function(b,c){b!==c&&(a.fieldChangeSuccess.launchUrl=!1,a.fieldChanged.launchUrl=!0)},!1)}).error(function(b){a.error=!0}),a.timeout=function(){a.disabled.timeout=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,timeout:b.app.timeout}).success(function(c){b.app=c,n(),a.disabled.timeout=!1}).error(function(b){console.log(b),a.disabled.timeout=!1})},a.disable=function(c){a.disabled.disabled=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,disabled:c}).success(function(c){b.app=c,a.disabledConfirm=null,a.showDisabledButton=!1,n(),a.disabled.disabled=!1}).error(function(b){console.log(b),a.disabledConfirm=null,a.showDisabledButton=!1,a.disabled.disabled=!1})},a.protectedByAccount=function(c){a.disabled.protectedByAccount=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,protectedByAccount:c}).success(function(c){b.app=c,a.accessConfirm=null,a.showAccessButton=!1,n(),a.disabled.protectedByAccount=!1}).error(function(b){console.log(b),a.accessConfirm=null,a.showAccessButton=!1,a.disabled.protectedByAccount=!1})},a.disableHome=function(){a.disabled.disableHome=!0,g.post("/api/app/"+b.app.privateKey+"/update",{privateKey:b.app.privateKey,disableHome:b.app.disableHome}).success(function(c){b.app=c,n(),a.disabled.disableHome=!1}).error(function(b){console.log(b),a.disabled.disableHome=!1})},a.updateFieldWithChange=function(c){a.fieldChangeSuccess[c]=!1,a.disabled[c]=!0;var d={};d[c]=b.app[c]||null,g.post("/api/app/"+b.app.privateKey+"/update",d).success(function(d){b.app=d,n(),a.disabled[c]=!1,a.fieldChangeSuccess[c]=!0,a.fieldChanged[c]=!1}).error(function(b){console.log(b),a.disabled[c]=!1})};var p="https://api.appetize.io";"localhost"==i.$$host&&(p="http://localhost:9081"),a.downloadUsage=function(){k.location.href="/api/app/"+b.app.publicKey+"/usageReport"},a.downloadLogs=function(){var c=a.logMonth.getFullYear()+"-"+("0"+(a.logMonth.getMonth()+1)).slice(-2);k.location.href="/api/app/"+b.app.publicKey+"/sessionLogs/?month="+c},a.deleteGraphic=function(c,d,e){if(d&&d[c]){a.disabled.uploadGraphic=!0,delete d[c];var f={};f[e]=b.app[e]||null,g.post("/api/app/"+b.app.privateKey+"/update",f).success(function(c){b.app=c,n(),a.disabled.uploadGraphic=!1}).error(function(b){console.log(b),a.disabled.uploadGraphic=!1})}},a.onGraphicSelect=function(c,d,h){var i=c[0];return i.size>5242880?void toastr.error("Your proposed upload exceeds the maximum allowed size of 5MB"):(a.disabled.uploadGraphic=!0,void g({method:"GET",url:"/api/files/signedStaticUpload",params:{type:i.type}}).success(function(c){if(a.fileUploadProgress=0,"s3"===c.storageType)a.fileUpload=e.upload({url:c.url,method:"POST",data:{key:c.key,acl:"public-read",AWSAccessKeyId:c.AWSAccessKeyId,"Content-Type":c.mimetype,success_action_status:"201",Policy:c.s3Policy,Signature:c.s3Signature},file:i});else{if(!(c.storageType="local"))return;a.fileUpload=e.http({url:c.url,headers:{"Content-Type":i.type},data:i})}a.fileUpload.then(function(e){if(a.fileUploadProgress=!1,201===e.status){var i;"s3"===c.storageType?i=o.xml_str2json(e.data):"local"===c.storageType&&(i=e.data);var j=f(h);j.assign(a,decodeURIComponent(i.PostResponse.Location));var k={};k[d]=b.app[d]||null,g.post("/api/app/"+b.app.privateKey+"/update",k).success(function(c){b.app=c,n(),a.disabled.uploadGraphic=!1}).error(function(b){console.log(b),a.disabled.uploadGraphic=!1})}else toastr.error("Error uploading file"),a.disabled.uploadGraphic=!1},function(b){var c=o.xml_str2json(b.data);"EntityTooLarge"==c.Error.Code?toastr.error("Your proposed upload exceeds the maximum allowed size of 5MB"):toastr.error("Error uploading file"),a.disabled.uploadGraphic=!1},function(b){a.fileUploadProgress=parseInt(100*b.loaded/b.total)})}).error(function(b){toastr.error("Error uploading file"),a.disabled.uploadGraphic=!1}))}}]),angular.module("appetizeApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("appetizeApp").controller("UploadCtrl",["$scope","$rootScope","$upload","$route","$http","$location","$anchorScroll",function(a,b,c,d,e,f,g){function h(a,b){return-1!==a.toLowerCase().indexOf(b.toLowerCase(),a.length-b.length)}console.log("UploadCtrl loaded");var i=new X2JS;a.error={};var j=null;a.progress=!1,a.formData={},e.get("/api/files/signedUpload").success(function(b){j=b,a.loaded=!0}).error(function(b){a.error.load=!0}),a.reloadPage=function(){d.reload()},a.onFileSelect=function(d){for(var f=0;f<d.length;f++){var g,k,l=d[f];if(h(l.name,".zip"))g="zip",k="ios";else if(h(l.name,".tar.gz"))g="tar.gz",k="ios";else{if(!h(l.name,".apk"))return a.error.message="Please upload a .zip or .tar.gz for iOS, or .apk for Android",void(a.error.upload=!0);g="apk",k="android"}if(a.error.upload=!1,a.formData.location=null,a.error.message=null,a.success=!1,"object"==typeof a.pageConfig&&(a.pageConfig.newValue=!1),l.size>1e9)return a.error.message="Your proposed upload exceeds the maximum allowed size of 1GB",void(a.error.upload=!0);if(a.progress=0,a.upload,"s3"===j.storageType)a.upload=c.upload({url:j.url,method:"POST",data:{key:j.key,acl:"authenticated-read",AWSAccessKeyId:j.AWSAccessKeyId,success_action_status:"201",Policy:j.s3Policy,Signature:j.s3Signature},file:l});else{if("local"!==j.storageType)return;a.upload=c.http({url:j.url,headers:{"Content-Type":l.type},data:l})}a.upload.then(function(c){if(a.progress=!1,201===c.status){var d;"s3"===j.storageType?d=i.xml_str2json(c.data):"local"===j.storageType&&(d=c.data),b.app&&b.app.privateKey?e.post("/api/app/"+b.app.privateKey+"/update",{location:decodeURIComponent(d.PostResponse.Location),fileType:g,platform:k}).success(function(c){b.app.updated=c.updated,b.app.platform=c.platform,b.app.versionCode=c.versionCode,b.app.email=c.email,"object"==typeof a.pageConfig&&(a.pageConfig.newValue=!0),a.formData.location=c.file}).error(function(b){a.error.upload=!0,a.error.message=b}):(a.formData.location=decodeURIComponent(d.PostResponse.Location),a.formData.fileType=g,a.formData.platform=k),b.user&&(a.formData.email=b.user.username,a.formData.sendEmail=!1,a.generate())}else a.error.upload=!0},function(b){var c=i.xml_str2json(b.data);"EntityTooLarge"==c.Error.Code&&(a.error.message="Your proposed upload exceeds the maximum allowed size of 1GB"),a.progress=!1,a.error.upload=!0},function(b){a.progress=parseInt(100*b.loaded/b.total)})}},a.generate=function(){console.log("generate called"),e.post("/api/app/create",a.formData).success(function(c){a.success=!0,b.recordEvent("app_created_via_upload"+a.device),a.newApp=c}).error(function(b){a.error.generate=!0})}}]),angular.module("appetizeApp").controller("CanvasCtrl",["$scope","$routeParams","$timeout","$sce","$rootScope","$modal","$location","$anchorScroll","$http","Device","appConstants",function(a,b,c,d,e,f,g,h,i,j,k){function l(a){return"number"==typeof a&&a>=10&&100>=a?!0:!1}function m(a){return"android"==a&&e.app.architectures&&e.app.architectures.length>0&&-1===e.app.architectures.indexOf("x86")?e.deviceConfig.androidDefaultNoX86:e.deviceConfig.compatibleDevices&&e.deviceConfig.compatibleDevices[a]&&v(b.device,e.deviceConfig.compatibleDevices[a])?b.device:"android"==a?e.deviceConfig.androidDefault:e.deviceConfig.iosDefault}function n(a){for(var b,c,d=0,f=[],g=0;g<a.length;g++){if("mousedown"===a[g].type||"keypress"===a[g].type)c=a[g].timeStamp,a[g].timeStamp+=d,f.push(a[g]);else if("mouseup"===a[g].type){if("mousedown"!==b.type)return void toastr.error("Error processing journeyPlaybackSimple");for(var h=a[g].xPos-b.xPos,i=a[g].yPos-b.yPos,j=Math.abs(h)>Math.abs(i)?Math.ceil(Math.abs(h)/10):Math.ceil(Math.abs(i)/10),k=0;j>k;k++)f.push({type:"mousemove",timeStamp:c+d,xPos:Math.ceil(b.xPos+k/j*h),yPos:Math.ceil(b.yPos+k/j*i)}),d+=20;a[g].timeStamp+=d,f.push(a[g])}else if("string"===a[g].type)for(var k=0;k<a[g].value.length;k++){var l=e.convertCharToRawKey(a[g].value[k]);f.push({type:"keypress",key:l.key,shiftKey:l.shiftKey,timeStamp:a[g].timeStamp+d}),d+=50}b=a[g]}return f}if(console.log("CanvasCtrl loaded"),a.trustSrc=function(a){return d.trustAsResourceUrl(a)},e.devices=[],e.isEmbed=g.path().indexOf("/embed/")>-1,e.isStandalone=g.path().indexOf("/standalone")>-1,toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",e.deviceConfig.compatibleDevices.ios){e.deviceConfig.iosDevices=[];for(var o in e.deviceConfig.compatibleDevices.ios)e.deviceConfig.iosDevices.push(o)}if(e.deviceConfig.compatibleDevices.android){e.deviceConfig.androidDevices=[];for(var o in e.deviceConfig.compatibleDevices.android)e.deviceConfig.androidDevices.push(o)}e.deviceConfig.deviceLabels=k.deviceLabels;var p={};"landscape"==b.orientation?(p.orientation="landscape",p.rotation=270):(p.orientation="portrait",p.rotation=0);var q=parseInt(b.scale);if(l(q)?p.scale=q:k.tabletDevices.indexOf(b.device)>-1?p.scale=50:p.scale=75,"silver"==b.deviceColor||"white"==b.deviceColor?p.deviceColor="white":p.deviceColor="black","true"==b.screenOnly?p.showDeviceBorder=!1:p.showDeviceBorder=!0,"true"==b.debug?p.debug=!0:p.debug=!1,"true"==b.noVideo?p.noVideo=!0:p.noVideo=!1,"true"==b.broadcastInteractions?p.broadcastInteractions=!0:p.broadcastInteractions=!1,"true"==b.enableAdb?p.enableAdb=!0:p.enableAdb=!1,"true"==b.xdocMsg?p.xdocMsg=!0:p.xdocMsg=!1,"true"==b.autoplay?p.autoplay=!0:p.autoplay=!1,"true"==b.centered?p.centered=!0:p.centered=!1,k.physicalDevices.indexOf(b.device)>-1?p.physical=!0:p.physical=!1,b.language&&(p.language=b.language),b.locale&&(p.locale=b.locale),b.osVersion&&(p.osVersion=b.osVersion),b.location&&(b.location.match(/^-?[\d]{1,3}[.][\d]+,-?[\d]{1,3}[.][\d]+$/)?p.location=b.location:console.log("Invalid location specified, must be expressed  location=10.123,42.12\nYou specified: "+b.location)),b.launchUrl&&(p.launchUrl=b.launchUrl),b.proxy&&(p.proxy=b.proxy),p.region=b.region,p.notFirstRequest=!1,p.params=null,b.params)try{p.params=JSON.parse(decodeURIComponent(b.params)),p.paramsString=JSON.parse(decodeURIComponent(b.params))}catch(r){p.paramsString="Unable to parse params",console.log("Error parsing params, ",r)}if(p.plistEdit=null,b.plistEdit)try{p.plistEdit=JSON.parse(decodeURIComponent(b.plistEdit)),p.plistEditString=JSON.parse(decodeURIComponent(b.plistEdit))}catch(r){p.plistEditString="Unable to parse plistEdit",console.log("Error parsing plistEdit, ",r)}e.devices.push(new j(p)),a.addWatch=function(){var a={name:"wearround",deviceColor:"black",showDeviceBorder:!0,notFirstRequest:!1,params:null,type:"watch",scale:75,orientation:"portrait",platform:"android",rotation:0};e.devices.push(new j(a)),e.devices[1].setDeviceParameters("wearround"),e.devices[1].updateScaledWidthsAndHeights(),e.devices[0].appLaunch&&e.devices[1].requestSession()},a.connectWatch=function(){e.devices[1].connectWatch(e.devices[0].connectionString,e.devices[0].connectionToken)},a.removeWatch=function(){e.devices[e.devices.length-1].destroy(),e.devices.pop()};var s=["Hello from Appetize.io!","You're looking great today!","Knock, Knock...","Go on, try and break me!","Sorry, I'm not talkative right now"];if(a.sendSms=function(){"watch"!=e.devices[0].type&&e.devices[0].appetizer&&e.devices[1]&&(e.devices[0].appetizer.emit("sendSms",{message:s[Math.floor(Math.random()*s.length)]}),e.devices[1].heartbeat())},e.app=null,b.publicKey&&"demo"!=b.publicKey)"<PUBLIC KEY>"==b.publicKey||b.publicKey.indexOf("<")>-1||b.publicKey.indexOf(">")>-1?a.mustReplacePublicKey=!0:i.get("/api/app/"+b.publicKey).success(function(c){e.app=c,e.devices[0].updateDevice(m(c.platform)),b.addWatch&&a.addWatch()}).error(function(b,c,d,e){"This app is no longer available"===b?a.error={message:b}:a.error={message:"Error loading app, please verify URL"}});else if(b.privateKey)i.get("/api/app/"+b.privateKey+"/manage").success(function(c){e.app=c,e.devices[0].updateDevice(m(c.platform)),e.devices[0].debug=!0,b.addWatch&&a.addWatch()}).error(function(b){a.error=!0});else if(e.isEmbed&&"demo"!=b.publicKey)if(3===g.path().split("/").length){var t=g.path().split("/")[2];i.get("/api/app/"+t).success(function(c){e.app=c,e.devices[0].updateDevice(m(c.platform)),b.addWatch&&a.addWatch()}).error(function(b,c,d,e){401===c?a.error={message:"This app is no longer available."}:a.error={message:"Error loading app, please verify URL"}})}else a.error=!0;else e.isEmbed&&"demo"==b.publicKey?a.error={message:"Embedding the demo is not allowed, please visit https://appetize.io/demo"}:1==a.adbConnect?(e.devices[0].enableAdb=!0,e.deviceConfig.androidDevices.indexOf(b.device)>-1?e.devices[0].updateDevice(b.device):e.devices[0].updateDevice(e.deviceConfig.androidDefault)):e.isStandalone?(e.deviceConfig.iosDevices.indexOf(b.device)>-1||e.deviceConfig.androidDevices.indexOf(b.device)>-1?e.devices[0].updateDevice(b.device):e.devices[0].updateDevice(e.deviceConfig.systemDefault),b.addWatch&&a.addWatch()):(e.deviceConfig.iosDevices.indexOf(b.device)>-1||e.deviceConfig.androidDevices.indexOf(b.device)>-1?e.devices[0].updateDevice(b.device):e.devices[0].updateDevice(e.deviceConfig.systemDefault),b.addWatch&&a.addWatch(),e.isDemo=!0);if(a.onClipboardSuccess=function(a){a.clearSelection()},a.$on("$locationChangeStart",function(a,b,c){if(!(c.indexOf(-1==b.indexOf("?")?b:b.substring(0,b.indexOf("?")))>-1)){for(var d=0;d<e.devices.length;d++)e.devices[d].destroy();e.devices=[],e.app=null,e.isEmbed=null,$(document).off("keypress").keypress(function(a){}),$(document).off("keydown").keydown(function(a){}),$(document).off("keyup").keyup(function(a){}),toastr.remove()}}),"true"==b.xdocMsg){var u=function(a){if("requestSession"==a.data)e.devices[0].appetizer||e.devices[0].queue||e.devices[0].requestSession();else if("emitHomeButton"==a.data)e.devices[0].emitHomeButton();else if("rotateLeft"==a.data)e.devices[0].rotateLeft(),e.$apply(function(){});else if("rotateRight"==a.data)e.devices[0].rotateRight(),e.$apply(function(){});else if("setScale"===a.data.type&&a.data.value){var b=parseInt(a.data.value);l(b)&&(e.devices[0].updateScale(b),e.$apply(function(){}))}else if("cleanConnection"==a.data)e.devices[0].cleanConnection();else if("endSession"==a.data)e.devices[0].endSession();else if("saveScreenshot"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].screenshot();else if("getScreenshot"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].xdocScreenshot();else if("heartbeat"==a.data)e.devices[0].appetizer&&(e.devices[0].appLaunch||e.devices[0].physical)&&e.devices[0].appetizer.emit("userInteraction",{type:"heartbeat"});else if("androidKeycodeMenu"==a.data)e.devices[0].appetizer&&(e.devices[0].appLaunch||e.devices[0].physical)&&e.devices[0].appetizer.emit("androidKeycodeMenu");else if("restartApp"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("restartApp");else if("shakeDevice"==a.data)e.devices[0].appetizer&&e.devices[0].appLaunch&&e.devices[0].appetizer.emit("shakeDevice");else if("swipeRight"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var c=[{type:"mousedown",timeStamp:43299.635,xPos:31,yPos:273},{type:"mousemove",timeStamp:43383.995,xPos:33,yPos:273},{type:"mousemove",timeStamp:43401.69500000001,xPos:42,yPos:273},{type:"mousemove",timeStamp:43418.82000000001,xPos:55,yPos:273},{type:"mousemove",timeStamp:43435.66,xPos:85,yPos:273},{type:"mousemove",timeStamp:43452.545,xPos:124,yPos:273},{type:"mousemove",timeStamp:43469.67,xPos:164,yPos:273},{type:"mousemove",timeStamp:43486.565,xPos:196,yPos:273},{type:"mousemove",timeStamp:43503.670000000006,xPos:224,yPos:279},{type:"mousemove",timeStamp:43521.30500000001,xPos:236,yPos:280},{type:"mousemove",timeStamp:43538.385,xPos:249,yPos:283},{type:"mousemove",timeStamp:43555.42500000001,xPos:253,yPos:283},{type:"mousemove",timeStamp:43572.46000000001,xPos:255,yPos:284},{type:"mousemove",timeStamp:43589.64,xPos:255,yPos:286},{type:"mousemove",timeStamp:43607.340000000004,xPos:256,yPos:286},{type:"mouseup",timeStamp:43623.58,xPos:256,yPos:286}];e.devices[0].playBackSequence(c,0,10)}}else if("swipeLeft"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var c=[{type:"mousedown",timeStamp:40900.785,xPos:279,yPos:290},{type:"mousemove",timeStamp:41005.895000000004,xPos:275,yPos:290},{type:"mousemove",timeStamp:41022.745,xPos:267,yPos:290},{type:"mousemove",timeStamp:41039.740000000005,xPos:260,yPos:290},{type:"mousemove",timeStamp:41056.54000000001,xPos:250,yPos:290},{type:"mousemove",timeStamp:41073.545000000006,xPos:232,yPos:290},{type:"mousemove",timeStamp:41090.545000000006,xPos:203,yPos:290},{type:"mousemove",timeStamp:41107.965,xPos:174,yPos:290},{type:"mousemove",timeStamp:41124.810000000005,xPos:154,yPos:290},{type:"mousemove",timeStamp:41141.98,xPos:134,yPos:288},{type:"mousemove",timeStamp:41158.705,xPos:116,yPos:287},{type:"mousemove",timeStamp:41175.62500000001,xPos:103,yPos:284},{type:"mousemove",timeStamp:41192.61,xPos:91,yPos:283},{type:"mousemove",timeStamp:41209.755000000005,xPos:81,yPos:283},{type:"mousemove",timeStamp:41226.655,xPos:72,yPos:283},{type:"mousemove",timeStamp:41243.575,xPos:62,yPos:282},{type:"mousemove",timeStamp:41260.795,xPos:54,yPos:280},{type:"mousemove",timeStamp:41277.545000000006,xPos:45,yPos:278},{type:"mousemove",timeStamp:41294.255000000005,xPos:31,yPos:273},{type:"mouseup",timeStamp:41339.605,xPos:31,yPos:273}];e.devices[0].playBackSequence(c,0,10)}}else if("swipeDown"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var c=[{type:"mousedown",timeStamp:52000.895000000004,xPos:137,yPos:69},{type:"mousemove",timeStamp:52100.95500000001,xPos:137,yPos:72},{type:"mousemove",timeStamp:52131.655,xPos:137,yPos:111},{type:"mousemove",timeStamp:52165.08500000001,xPos:142,yPos:151
},{type:"mousemove",timeStamp:52198.835,xPos:146,yPos:184},{type:"mousemove",timeStamp:52232.58500000001,xPos:152,yPos:232},{type:"mousemove",timeStamp:52266.355,xPos:159,yPos:290},{type:"mousemove",timeStamp:52300.155000000006,xPos:164,yPos:346},{type:"mousemove",timeStamp:52367.685000000005,xPos:163,yPos:414},{type:"mousemove",timeStamp:52435.135,xPos:160,yPos:448},{type:"mousemove",timeStamp:52468.87,xPos:159,yPos:456},{type:"mousemove",timeStamp:52503.30500000001,xPos:159,yPos:462},{type:"mousemove",timeStamp:52538.975000000006,xPos:159,yPos:464},{type:"mousemove",timeStamp:52577.83000000001,xPos:157,yPos:466},{type:"mousemove",timeStamp:52611.435000000005,xPos:157,yPos:467},{type:"mousemove",timeStamp:52662.76500000001,xPos:157,yPos:474},{type:"mousemove",timeStamp:52696.990000000005,xPos:157,yPos:482},{type:"mousemove",timeStamp:52731.135,xPos:160,yPos:488},{type:"mouseup",timeStamp:52847.825000000004,xPos:160,yPos:488}];e.devices[0].playBackSequence(c,0,10)}}else if("swipeUp"==a.data){if(e.devices[0].appetizer&&e.devices[0].appLaunch){var c=[{type:"mousedown",timeStamp:48373.990000000005,xPos:146,yPos:488},{type:"mousemove",timeStamp:48391.705,xPos:142,yPos:470},{type:"mousemove",timeStamp:48425.58,xPos:126,yPos:464},{type:"mousemove",timeStamp:48459.715000000004,xPos:114,yPos:412},{type:"mousemove",timeStamp:48493.735,xPos:109,yPos:368},{type:"mousemove",timeStamp:48527.345,xPos:107,yPos:330},{type:"mousemove",timeStamp:48561.055,xPos:107,yPos:302},{type:"mousemove",timeStamp:48595.04,xPos:107,yPos:280},{type:"mousemove",timeStamp:48629.415,xPos:107,yPos:261},{type:"mousemove",timeStamp:48663.020000000004,xPos:109,yPos:243},{type:"mousemove",timeStamp:48696.815,xPos:110,yPos:231},{type:"mousemove",timeStamp:48731.19500000001,xPos:110,yPos:218},{type:"mousemove",timeStamp:48765.495,xPos:110,yPos:201},{type:"mousemove",timeStamp:48799.46000000001,xPos:110,yPos:182},{type:"mousemove",timeStamp:48849.84000000001,xPos:107,yPos:160},{type:"mousemove",timeStamp:48917.66,xPos:107,yPos:140},{type:"mousemove",timeStamp:48986.18000000001,xPos:109,yPos:126},{type:"mousemove",timeStamp:49020.23500000001,xPos:111,yPos:118},{type:"mousemove",timeStamp:49087.715000000004,xPos:115,yPos:107},{type:"mousemove",timeStamp:49121.755000000005,xPos:117,yPos:102},{type:"mousemove",timeStamp:49173.705,xPos:120,yPos:97},{type:"mousemove",timeStamp:49207.77500000001,xPos:122,yPos:94},{type:"mousemove",timeStamp:49242.19,xPos:122,yPos:91},{type:"mousemove",timeStamp:49277.840000000004,xPos:123,yPos:91},{type:"mouseup",timeStamp:49371.735,xPos:123,yPos:91}];e.devices[0].playBackSequence(c,0,10)}}else if(a.data&&"journeyPlayback"==a.data.type&&a.data.value)e.devices[0].appetizer&&e.devices[0].endSession(),e.devices[0].requestSession(),e.devices[0].journeyPlayback=a.data.value;else if(a.data&&"journeyPlaybackSimple"==a.data.type&&a.data.value){e.devices[0].appetizer&&e.devices[0].endSession(),e.devices[0].requestSession();var d=n(a.data.value);e.devices[0].journeyPlayback=d}else a.data&&a.data.type&&e.devices[0].appetizer&&e.devices[0].appLaunch&&("mouseclick"==a.data.type&&a.data.x&&a.data.y?(e.devices[0].appetizer.emit("userInteraction",{type:"mousedown",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y}),e.devices[0].appetizer.emit("userInteraction",{type:"mouseup",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y})):"mousedown"==a.data.type&&a.data.x&&a.data.y?e.devices[0].appetizer.emit("userInteraction",{type:"mousedown",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y}):"mousemove"==a.data.type&&a.data.x&&a.data.y?e.devices[0].appetizer.emit("userInteraction",{type:"mousemove",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y}):"mouseup"==a.data.type&&a.data.x&&a.data.y?e.devices[0].appetizer.emit("userInteraction",{type:"mouseup",timeStamp:Date.now(),xPos:a.data.x,yPos:a.data.y}):"keypress"==a.data.type&&a.data.key?e.devices[0].appetizer.emit("userInteraction",{type:"keypress",shiftKey:a.data.shiftKey+"",key:a.data.key,timeStamp:Date.now()}):"pasteText"==a.data.type&&a.data.value?e.devices[0].pasteTextString(a.data.value):"language"==a.data.type&&a.data.value?e.devices[0].appetizer.emit("setLanguage",{language:a.data.value,timeStamp:Date.now()}):"location"==a.data.type&&a.data.value?e.devices[0].appetizer.emit("setLocation",{location:a.data.value,timeStamp:Date.now()}):"url"==a.data.type&&a.data.value&&e.devices[0].appetizer.emit("openUrl",{url:a.data.value,timeStamp:Date.now()}))};window.addEventListener("message",u,!1)}e.broadcastInteractionsConstants={controlKeys:[8,9,13,16,37,38,39,40,null],digitCharsWithShift:[")","!","@","#","$","%","^","&","*","("],charsWithShiftMap:{47:"?",44:"<",45:"_",46:">",91:"{",92:"|",93:"}",96:"~",59:":",61:"+",39:'"'},keysWithShiftMap:{191:"?",188:"<",189:"_",190:">",219:"{",220:"|",221:"}",192:"~",186:":",187:"+",222:'"'}},e.convertCharToRawKey=function(a){var b;for(var c in e.broadcastInteractionsConstants.charsWithShiftMap)if(a===e.broadcastInteractionsConstants.charsWithShiftMap[c])return b={key:String.fromCharCode(c),shiftKey:"true"};var d=e.broadcastInteractionsConstants.digitCharsWithShift.indexOf(a);return b=d>-1?{key:String.fromCharCode(d+48).toLowerCase(),shiftKey:"true"}:a!==a.toLowerCase()?{key:a.toLowerCase(),shiftKey:"true"}:{key:a,shiftKey:"false"}},e.getCharFromKeypress=function(a){return a.which>=65&&a.which<=90?"true"==a.shiftKey?a.key:a.key.toLowerCase():"false"==a.shiftKey?a.key:a.which>=48&&a.which<=57?e.broadcastInteractionsConstants.digitCharsWithShift[a.which-48]:e.broadcastInteractionsConstants.keysWithShiftMap[a.which]};var v=function(a,b){for(var c in b)if(c==a)return!0;return!1}}]),angular.module("appetizeApp").controller("SubscribeCtrl",["$scope","$http","$window",function(a,b,c){a.subscription={},a.doSubscribe=function(c){a.subscription={},a.subscribeForm.$valid?b.post("/api/doSubscribe",{email:c}).then(function(b){a.subscription.result="success"})["catch"](function(b){a.subscription.result="error",400===b.status?a.subscription.message=b.data:a.subscription.message="Error subscribing to newsletter, please try again or email hello@appetize.io"}):(a.subscription.result="error",a.subscription.message="Error subscribing to newsletter, please try again or email hello@appetize.io")}}]),angular.module("appetizeApp").controller("AnalyticsCtrl",["$scope","$http","$rootScope","$location","$timeout","$upload","$routeParams","$window",function(a,b,c,d,e,f,g,h){c.recordEvent=function(a){c.isOnprem||(-1===document.cookie.indexOf("analytics-ignore")?(mixpanel.track(a),_gaq.push(["_trackEvent","userInteraction",a])):console.log("excluded: "+a))},a.$on("$routeChangeSuccess",function(a){c.isOnprem||(-1===document.cookie.indexOf("analytics-ignore")?_gaq.push(["_trackPageview",d.url()]):console.log("excluded: "+d.url()))})}]),angular.module("appetizeApp").controller("ConnectCtrl",["$scope","$rootScope","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g){console.log("ConnectCtrl loaded"),a.adbConnect=!0,a.forceButtonText="ADB Connect",a.forceButtonColor="#333333"}]),angular.module("appetizeApp").controller("LoginCtrl",["$scope","$rootScope","$http","$routeParams","$location","AuthService",function(a,b,c,d,e,f){a.credentials={},"invite"==d.reason?a.reason="You must be signed in to accept or decline this invitation":"manage"==d.reason?a.reason="You must be signed in to manage your apps":"debug"==d.reason?a.reason="You must be signed in to debug your apps":"standalone"==d.reason?a.reason="You must be signed in to run standalone devices":"unauthorized"==d.reason?a.reason="You are not authorized to access that page, please sign in below":"accounts"==d.reason?a.reason="Our accounts dashboard has moved, please sign in below":"systemadmin"==d.reason&&(a.reason="You must be logged in as a system admin to access that page"),a.login=function(c){a.formError=null,a.loginForm.$valid&&(a.disabled=!0,f.login(c).then(function(c){a.setCurrentUser(c),d.next?e.url(d.next):d.ref?window.location.href=d.ref:b.isOnprem?e.url("/"):e.url("/dashboard")},function(b){console.log(b),429==b.status?a.formError=b.data:a.formError="Invalid username or password",a.disabled=!1}))}}]),angular.module("appetizeApp").controller("SignupCtrl",["$scope","$rootScope","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g){console.log("SignupCtrl loaded"),a.verifyEmail=function(a){toastr.remove(),c.post("/api/user/verifyEmail",{username:a.email}).then(function(b){a.email=null,toastr.info("Email verification sent. Please check your email.")})}}]),angular.module("appetizeApp").controller("RegisterCtrl",["$scope","$rootScope","$routeParams","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g,h){function i(b){d.get("/api/registrationToken/"+b+"/verify").success(function(b){b&&b.username?a.newUser=b:a.error="Invalid registration token"}).error(function(b){console.log(b),a.error=b})}console.log("RegisterCtrl loaded"),i(c.token),a.register=function(b){a.formError=null,a.registerForm.$valid&&(a.disabled=!0,h.register(b).then(function(b){a.setCurrentUser(b),e.url("/dashboard")},function(b){a.formError=b.data,a.disabled=!1}))}}]),angular.module("appetizeApp").controller("InviteCtrl",["$scope","$rootScope","$routeParams","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g,h){function i(b){d.get("/api/inviteToken/"+b+"/verify").success(function(b){return console.log(b),b.userIsRegistered&&!b.userIsLoggedIn?void e.url("/login?reason=invite&next="+encodeURIComponent(e.url())):void(a.tokenData=b)}).error(function(b){a.error=b})}console.log("InviteCtrl loaded"),a.tokenData={},c.token?i(c.token):a.error="Invalid token provided",a.acceptInvite=function(){d.post("/api/user/acceptInvite",a.tokenData).success(function(a){e.url("/success")}).error(function(b){a.error=b})},a.rejectInvite=function(){d.post("/api/user/rejectInvite",a.tokenData).success(function(a){e.url("/success")}).error(function(b){a.error=b})},a.register=function(b){a.formError=null,a.registerForm.$valid&&(a.disabled=!0,h.register(b).then(function(b){a.setCurrentUser(b),e.url("/dashboard")},function(b){a.formError=b.data,a.disabled=!1}))}}]),angular.module("appetizeApp").controller("UserCtrl",["$scope","$rootScope","$http","$location","AuthService",function(a,b,c,d,e){function f(){e.checkLogin().then(function(c){c&&c.username?a.setCurrentUser(c):b.loggedIn=!1},function(a){console.log("Error checking login")})}a.setCurrentUser=function(a){a&&(b.loggedIn=!0,b.user=a)},a.logout=function(){c.post("/api/user/logout").success(function(a){b.user=null,b.loggedIn=!1}).error(function(a){console.log("Error logging out")})},f()}]),angular.module("appetizeApp").factory("AuthService",["$rootScope","$http",function(a,b){var c={};return c.login=function(c){return console.log("login"),b.post("/api/user/login",c).then(function(b){return a.recordEvent("user_login"),b.data})},c.register=function(c){return console.log("register"),b.post("/api/user/register",c).then(function(b){return a.recordEvent("user_register"),b.data})},c.checkLogin=function(){return console.log("checklogin"),b.get("/api/user").then(function(a){return a.data})["catch"](function(a){console.log("caught error"),console.log(a)})},c}]),angular.module("appetizeApp").controller("ClaimCtrl",["$scope","$rootScope","$http","$location","$routeParams","AuthService",function(a,b,c,d,e,f){function g(b){c.get("/api/usertoken/"+b).success(function(b){b?(a.account=b,a.newUser.accountId=b._id):a.error="Invalid token"}).error(function(b){console.log(b),a.error=b})}a.newUser={},a.disabled=!1,e.token?(a.newUser.token=e.token,g(a.newUser.token)):a.error="You must have a token to register an account",a.register=function(b){a.formError=null,b.accountId=a.account._id,console.log(b),a.registerForm.$valid&&(a.disabled=!0,f.register(b).then(function(b){a.setCurrentUser(b),d.url("/")},function(b){a.formError=b.data,a.disabled=!1}))}}]),angular.module("appetizeApp").controller("ResetCtrl",["$scope","$rootScope","$routeParams","$location","$http","AuthService",function(a,b,c,d,e,f){function g(b){e.get("/api/passwordToken/"+b+"/verify").success(function(b){a.changeForm=b}).error(function(b){console.log(b),a.error.page=b})}a.error={},a.disabled={},a.changeForm={},a.resetForm={},c.token?(a.token=c.token,g(a.token)):a.noToken=!0,a.reset=function(b){a.error.resetForm=null,a.disabled.resetForm=!0,e.post("/api/user/emailPasswordReset",{username:b.email}).success(function(a){d.path("/success")}).error(function(b){a.error.resetForm=b})},a.change=function(b){return console.log(b),a.error.changeForm=null,b.password!==b.confirmPassword?void(a.error.changeForm="Passwords must match"):(a.disabled.changeForm=!0,void e.post("/api/user/changePassword",b).success(function(a){d.path("/success")}).error(function(b){a.error.changeForm=b}))}}]),angular.module("appetizeApp").directive("match",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(b){return a.$watch(c.match,function(e,f){var g=b===a.$eval(c.match);d.$setValidity("match",g)}),b}d.$parsers.push(e)}}}),angular.module("appetizeApp").controller("DashboardCtrl",["$scope","$rootScope","$q","$http","$location","$anchorScroll","$window",function(a,b,c,d,e,f,g){function h(){var b=c.defer();return d.post("/api/account/getApps",{filter:a.filter,search:a.search,sort:a.sort,lastItem:a.lastItem}).then(function(a){a&&a.data?b.resolve(a.data):b.reject()}),b.promise}function i(){d.get("/api/account/getAppGroups").then(function(b){b&&b.data?a.appGroups=b.data:toastr.error("Error getting app groups")})}function j(){d.post("/api/account/countApps").then(function(b){return b.data?void(a.countTotal=b.data.count):void 0})}function k(){d.post("/api/account/countApps",{filter:a.filter,search:a.search}).then(function(b){return b&&b.data?void(a.count=b.data.count):void 0})}console.log("DashboardCtrl loaded"),toastr.options.timeOut=1e4,toastr.options.positionClass="toast-bottom-full-width",a.apps,a.appGroups,a.disabled={},a.filter={},a.filter.disabled={$ne:!0},a.search,a.sort={},a.lastItem,h().then(function(b){a.apps=b,a.lastItem=b[b.length-1]}),k(),j(),i(),a.updateParamsForApps=function(){a.lastItem=null,h().then(function(b){a.apps=b,a.lastItem=b[b.length-1]}),k()},a.setDisabled=function(b){angular.equals(a.filter.disabled,b)?delete a.filter.disabled:a.filter.disabled=b,a.updateParamsForApps()},a.setPlatform=function(b){a.filter.platform==b?delete a.filter.platform:a.filter.platform=b,a.updateParamsForApps()},a.loadMore=function(){h().then(function(b){b.forEach(function(b){a.apps.push(b)}),a.lastItem=b[b.length-1]})},a.disable=function(b,c,e){if(!a.disabled.disable){a.disabled.disable=!0;var f={};f.disabled=c,d.post("/api/app/"+b.privateKey+"/update",f).success(function(b){a.apps[e]=b,a.disabled.disable=!1}).error(function(b){console.log(b),alert("Error updating app, please try again or contact hello@appetize.io."),a.disabled.disable=!1})}},a.deleteApp=function(b,c){if(!a.disabled["delete"]){a.disabled["delete"]=!0;var e={};e.deleted=!0,d.post("/api/app/"+b.privateKey+"/update",e).success(function(b){a.apps.splice(c,1),a.count--,a.countTotal--,i(),a.disabled["delete"]=!1}).error(function(b){console.log(b),alert("Error updating app, please try again or contact hello@appetize.io."),a.disabled["delete"]=!1})}},a.updateFieldForApp=function(b,c,e){if(!a.disabled[c]){a.disabled[c]=!0;var f={};f[c]=b[c]||null,d.post("/api/app/"+b.privateKey+"/update",f).success(function(b){a.apps[e]=b,a.disabled[c]=!1}).error(function(b){console.log(b),alert("Error updating app, please try again or contact hello@appetize.io."),a.disabled[c]=!1})}},a.downloadUsage=function(){g.location.href="/api/app/all/usageReport"},a.createAppGroup=function(){toastr.remove(),d.post("/api/appGroup/create").then(function(a){toastr.info("App group created"),i()})["catch"](function(a){i(),toastr.error("Error creating app group")})},a.deleteAppGroup=function(a){toastr.remove(),d.post("api/appGroup/delete",{publicKey:a.publicKey}).then(function(a){toastr.info("App group deleted"),i()})["catch"](function(a){i(),toastr.error("Error deleting app group")})},a.updateFieldForAppGroup=function(b,c){if(toastr.remove(),"apps"===c){if(b.apps.length>10)return toastr.error("App group may not contain more than 10 apps, please delete one and try again"),void i();for(var e=0;e<b.apps.length;e++)if(!b.apps[e])return toastr.warning("Invalid publicKey detected, please try again"),void i()}if(!a.disabled[c]){a.disabled[c]=!0;var f={};f[c]=b[c]||null,f.publicKey=b.publicKey,d.post("/api/appGroup/update",f).success(function(b){i(),a.disabled[c]=!1}).error(function(b){i(),toastr.error(b),a.disabled[c]=!1})}}}]),angular.module("appetizeApp").controller("AccountCtrl",["$scope","$rootScope","$http","$location","$anchorScroll","$window","AuthService",function(a,b,c,d,e,f,g){function h(){c.get("/api/account").then(function(b){a.account=b.data,a.billingEmails=angular.copy(a.account.billingEmails)})}function i(){c.get("/api/account/usage/mtd").then(function(b){a.usage=b.data})}function j(){g.checkLogin().then(function(a){a&&a.username&&(b.user=a)},function(a){toastr.error(a)})}if(console.log("AccountCtrl loaded"),a.messages={},a.account,a.billingEmails,h(),i(),a.updateAccountName=function(b){toastr.remove(),c.post("/api/account",{name:b}).then(function(b){toastr.info("Account name updated"),a.showEditName=!1,a.accountNameUpdate=null,h()})["catch"](function(a){toastr.error("Error updating account name")})},!b.isOnprem){a.setAlert=function(b){return toastr.remove(),a.alertForm.$valid||"object"!=typeof b?void c.post("/api/user",{billingAlertLevel:b&&b.amount?b.amount:null}).then(function(c){b&&(b.amount=null),a.alertForm.$setPristine(),toastr.info("Alert saved"),j()})["catch"](function(a){toastr.error("Error setting alert")}):void toastr.error("Invalid alert value")},a.updateBillingEmails=function(b){return"object"!=typeof b?void toastr.error("Invalid value"):(toastr.remove(),void c.post("/api/account",{billingEmails:b}).then(function(b){toastr.info("Billing emails updated"),a.newBillingEmail&&(a.newBillingEmail=null),a.billingForm.$setPristine(),h()})["catch"](function(a){toastr.error("Error updating billing emails")}))},a.invite=function(b){a.inviteForm.$valid&&(toastr.remove(),c.post("/api/user/inviteUser",{email:b.email}).then(function(c){b.email=null,a.inviteForm.$setPristine(),toastr.info("Invite sent")})["catch"](function(a){toastr.error("Error inviting user")}))},a.resetPassword=function(){toastr.remove(),c.post("/api/user/emailPasswordReset",{username:b.user.username}).then(function(a){toastr.info("Reset email sent. Please check your email.")})["catch"](function(a){toastr.error("Error sending reset email")})},a.removeCard=function(){toastr.remove(),c.post("/api/account/deleteStripePayment",{}).then(function(a){toastr.info("Card successfully removed"),h()})["catch"](function(a){toastr.error("Error removing card")})};var k=StripeCheckout.configure({key:"pk_live_rJPDFK5LNQN9B5m0aGRLs8MB",image:"/images/logo1_colored_background_padded_extra.png",locale:"auto",token:function(a){c.post("/api/account/setStripePayment",{token:a.id}).then(function(a){toastr.info("Card successfully updated"),h()})["catch"](function(a){toastr.error("Error setting credit card")})}});a.addCard=function(){toastr.remove(),k.open({name:"Appetize.io LLC",allowRememberMe:!1,panelLabel:a.account.cardLast4?"Update card":"Add card",email:b.user.username})},$(window).on("popstate",function(){k.close()})}}]),angular.module("appetizeApp").factory("Device",["$location","$rootScope","$routeParams","$http","$document","$window","$timeout","$interval","appConstants",function(a,b,c,d,e,f,g,h,i){var j=function(j){function k(a,d,e){g(function(){"true"==c.xdocMsg&&(window.parent.postMessage({type:"journeyPlaybackStep",value:d},"*"),window.parent.postMessage({type:"journeyPlaybackProgress",value:d/a.length},"*")),a&&a[d]&&b.devices[0].appetizer&&(b.devices[0].appetizer.emit("userInteraction",a[d]),a[d+1]?(e=a[d+1].timeStamp-a[d].timeStamp,k(a,d+1,e)):("true"==c.xdocMsg&&window.parent.postMessage("journeyPlaybackComplete","*"),b.devices[0].journeyPlayback=null))},e)}this.initialize=function(a){var d=this;angular.extend(d,a),this.canvasId=Date.now(),this.debugConsole="Log messages will follow once session has started...\n",this.interactionHistory=[],this.interactionHistorySimple=[],this.selectedRequestId,this.networkLog={},this.networkLogSimple={},this.chromeDevToolsUrl=null,window.isCrawler?console.log("Crawler detected, do not initialize websocket connection"):(this.clientController=io.connect("/client",{multiplex:!1}),this.clientController.on("queue",function(a){d.queue||"true"!=c.xdocMsg||window.parent.postMessage("sessionQueued","*"),d.queue=a.position,b.$apply(function(){})}),this.clientController.on("connect",function(a){console.log("clientController connected"),d.autoplay&&d.requestSession()}),this.clientController.on("newSession",function(a){d.connect(a)}),this.clientController.on("userError",function(a){b.recordEvent("user_error_on_clientController"),"true"==c.xdocMsg&&window.parent.postMessage("userError","*"),a.message&&toastr.error(a.message)}))},this.requestIdSelected=function(a){this.selectedRequestId===a?this.selectedRequestId=null:this.selectedRequestId=a},this.connectWatch=function(a,b){this.appetizer&&this.appetizer.emit("connectWearToPhone",{connectionString:a,connectionToken:b})},this.screenshot=function(){var a=new Blob([r],{type:"image/jpeg"});saveAs(a,getFormattedDate()+" Screenshot.jpg")},this.xdocScreenshot=function(){var a=new Uint8Array(r),b=uint8ArrayToString(a),c=btoa(b),d="data:image/jpeg;base64,"+c;window&&window.parent&&window.parent.postMessage({type:"screenshot",data:d},"*")},this.emitHomeButton=function(){this.appetizer&&this.appLaunch&&this.emitUserInteraction({type:"keypress",which:null,shiftKey:null,key:"home",timeStamp:Date.now()})},this.heartbeat=function(){this.appetizer&&(this.appLaunch||this.physical)&&this.appetizer.emit("userInteraction",{type:"heartbeat"})};var l=0,m=0;this.setRotation=function(a){var b=(a-this.rotation)%360;if(0!=b){var c=document.getElementById(this.canvasId);if(c){var d=c.getContext("2d");if(d){d.translate(-1*l,-1*m),d.rotate(-this.rotation*Math.PI/180),d.rotate(a*Math.PI/180);var e=0,f=0;0==a||(90==a?f=-1*i.screenDimensions[this.name].height:180==a?(e=-1*i.screenDimensions[this.name].width,f=-1*i.screenDimensions[this.name].height):270==a&&(e=-1*i.screenDimensions[this.name].width)),d.translate(e,f),l=e,m=f,a%180==0?this.orientation="portrait":this.orientation="landscape",this.rotation=a,this.updateScaledWidthsAndHeights();var g=new Uint8Array(r),h=uint8ArrayToString(g),j=btoa(h),k=new Image;k.onload=function(){var a=0,b=0;d.clearRect(0,0,2e3,2e3),d.drawImage(this,a,b)},k.src="data:image/jpeg;base64,"+j}}}},this.pasteText=function(a){var b=a.originalEvent.clipboardData.getData("text");this.pasteTextString(b)},this.pasteTextString=function(a){if(this.appetizer&&!this.broadcastInteractions&&"string"==typeof a&&0!=a.length){for(var c=[],d=[],e=0;e<a.length;e++){var f=b.convertCharToRawKey(a[e]);c.push(f.shiftKey),d.push(f.key)}this.emitUserInteraction({type:"keypressArray",shiftKeyArray:c,keyArray:d,value:a,timeStamp:Date.now()})}};var n=null;this.emitUserInteraction=function(a){if(this.appetizer&&!this.journeyPlayback)if(this.timeoutWarning)this.heartbeat();else{if(this.physical&&0!=this.rotation&&a.xPos&&a.yPos){var d=360-this.rotation,e=a.xPos,f=a.yPos;a.xPos=e*Math.cos(d*Math.PI/180)-f*Math.sin(d*Math.PI/180),a.yPos=e*Math.sin(d*Math.PI/180)+f*Math.cos(d*Math.PI/180),90==this.rotation?a.yPos+=i.screenDimensions[this.name].height:180==this.rotation?(a.xPos+=i.screenDimensions[this.name].width,a.yPos+=i.screenDimensions[this.name].height):270==this.rotation&&(a.xPos+=i.screenDimensions[this.name].width)}this.appetizer.emit("userInteraction",a),this.broadcastInteractions&&(this.addInteractionToHistory(a),"true"==c.xdocMsg&&(window.parent.postMessage({type:"interactionEvent",data:this.interactionHistory[this.interactionHistory.length-1]},"*"),window.parent.postMessage({type:"interactionEventSimple",data:this.interactionHistorySimple[this.interactionHistorySimple.length-1]},"*")),b.$$phase||b.$apply(function(){}))}};var o=0;this.rotateLeft=function(){return this.noVideo?(toastr.remove(),void toastr.warning("Rotation not supported when noVideo=true")):void(this.rotateDisabled||(this.appLaunch?(this.rotateDisabled="disabled",this.appetizer&&this.appLaunch&&this.emitUserInteraction({type:"keypress",which:null,shiftKey:null,key:"rotateLeft",timeStamp:Date.now()}),o+=270,o%=360):(this.rotation+=270,this.rotation%=360,this.rotation%180==90?this.orientation="landscape":this.orientation="portrait"),this.updateScaledWidthsAndHeights()))},this.rotateRight=function(){return this.noVideo?(toastr.remove(),void toastr.warning("Rotation not supported when noVideo=true")):void(this.rotateDisabled||(this.appLaunch?(this.rotateDisabled="disabled",this.appetizer&&this.appLaunch&&this.emitUserInteraction({type:"keypress",which:null,shiftKey:null,key:"rotateRight",timeStamp:Date.now()}),o+=90,o%=360):(this.rotation+=90,this.rotation%=360,this.rotation%180==90?this.orientation="landscape":this.orientation="portrait"),this.updateScaledWidthsAndHeights()))},this.cleanConnections=function(){for(var a=0;a<b.devices.length;a++)b.devices[a].cleanConnection()},this.destroy=function(){this.cleanConnection(),this.clientController&&this.clientController.disconnect()};var p=!1;this.cleanConnection=function(){if(b.app&&b.app.useLastFrame&&!p&&this.appLaunch){b.app.lastFrame||(b.app.lastFrame={});var a=new Uint8Array(r),d=uint8ArrayToString(a),e=btoa(d),f="data:image/jpeg;base64,"+e;b.app.lastFrame[this.name]=f,p=!0}this.appetizer&&(this.appetizer.disconnect(),"true"==c.xdocMsg&&window.parent.postMessage("sessionEnded","*")),this.clientController&&this.clientController.emit("removeFromQueue",{timestamp:Date.now()}),this.firstFrameReceived=!1,this.appLaunch=!1,this.queue=!1,this.connection=!1,this.appetizer=null,this.adbConnectionInfo=null,p=!1,this.timeoutWarning=!1,angular.isDefined(this.countdownWarningInterval)&&h.cancel(this.countdownWarningInterval),angular.isDefined(this.timeLimitCountdownInterval)&&h.cancel(this.timeLimitCountdownInterval),this.countdownWarning=null;var g=document.getElementById(this.canvasId);if(g){var i=g.getContext("2d");i&&i.clearRect(0,0,2e3,2e3)}"Log messages will follow once session has started...\n"!==this.debugConsole&&(this.debugConsole+="\n\nLog messages will follow once session has started...\n"),$("#"+self.canvasId).off("mousedown").mousedown(function(a){}),$(document).off("mousedown").mousedown(function(a){}),$(document).off("mousemove").mousemove(function(a){}),$(document).off("mouseup").mouseup(function(a){}),$("#"+self.canvasId).off("touchstart").on("touchstart",function(a){}),$(document).off("touchstart").on("touchstart",function(a){}),$(document).off("touchmove").on("touchmove",function(a){}),$(document).off("touchend").on("touchend",function(a){})},this.setDeviceParameters=function(a){i.deviceDimensions[a]&&(this.deviceWidth=i.deviceDimensions[a].width,this.deviceHeight=i.deviceDimensions[a].height),b.deviceConfig.iosDevices.indexOf(a)>-1?this.platform="ios":this.platform="android",i.tabletDevices.indexOf(a)>-1?(this.type="tablet",(this.name&&this.name!=a||!this.name&&!c.scale)&&(this.scale=50)):i.watchDevices.indexOf(a)>-1?(this.type="watch",this.name&&this.name!=a&&(this.scale=75)):(this.type="phone",this.name&&this.name!=a&&(this.scale=75)),i.physicalDevices.indexOf(a)>-1?this.physical=!0:this.physical=!1,this.name=a},this.updateDevice=function(a){if(toastr.remove(),this.showPostSession=!1,b.app&&b.app.useLastFrame&&this.appLaunch){b.app.lastFrame||(b.app.lastFrame={});var c=new Uint8Array(r),d=uint8ArrayToString(c),e=btoa(d),f="data:image/jpeg;base64,"+e;b.app.lastFrame[this.name]=f,p=!0}this.setDeviceParameters(a),this.updateScaledWidthsAndHeights(),this.cleanConnections(),this.setDefaultOSVersion(a),this.checkValidOSVersion(a)},this.updateColor=function(c){b.devices&&b.devices[0]==this&&a.search("deviceColor",c)},this.setDefaultOSVersion=function(d){!c.osVersion&&b.app&&b.app.defaultOSVersions&&b.app.defaultOSVersions[d]?this.osVersion=b.app.defaultOSVersions[d]:b.deviceConfig.compatibleDevices&&b.deviceConfig.compatibleDevices[this.platform]&&b.deviceConfig.compatibleDevices[this.platform][this.name]&&-1===b.deviceConfig.compatibleDevices[this.platform][this.name].indexOf(this.osVersion)&&(this.osVersion=b.deviceConfig.osVersionDefaults[this.name]),a.search("osVersion",this.osVersion)},this.updateOsVersion=function(c){this.cleanConnections(),b.devices&&b.devices[0]==this&&a.search("osVersion",c)},this.checkValidOSVersion=function(c){this.osVersion&&(b.deviceConfig.compatibleDevices&&b.deviceConfig.compatibleDevices[this.platform]&&b.deviceConfig.compatibleDevices[this.platform][c]&&b.deviceConfig.compatibleDevices[this.platform][c].indexOf(this.osVersion)>-1||(toastr.remove(),toastr.error("Invalid osVersion. OS: "+this.osVersion+" for device: "+c+" not supported. Device will use default osVersion."),delete this.osVersion,a.search("osVersion",null)))},this.updateScaledWidthsAndHeights=function(){if(this.canvasWrapperWidth=Math.ceil(i.deviceDimensions[this.name].width*this.scale/100),this.canvasWrapperHeight=Math.ceil(i.deviceDimensions[this.name].height*this.scale/100),this.showDeviceBorder?"portrait"==this.orientation?this.divMinWidth=this.canvasWrapperWidth:this.divMinWidth=this.canvasWrapperHeight:"portrait"==this.orientation?this.divMinWidth=this.canvasInnerContainerWidth:this.divMinWidth=this.canvasInnerContainerHeight,this.canvasInnerContainerTop=i.screenPositions[this.name][this.rotation].top,this.canvasInnerContainerLeft=i.screenPositions[this.name][this.rotation].left,this.rotateButtonsWidth=i.screenPositions[this.name].rotateButtons.width,this.rotateButtonsHeight=i.screenPositions[this.name].rotateButtons.height,this.rotateButtonsPosition=i.screenPositions[this.name].rotateButtons[this.orientation],"ios"==this.platform)for(this.homeButtonContainer=i.screenPositions[this.name].homeButtonContainer[this.rotation],this.homeButtonDimensions=i.screenPositions[this.name].homeButtonDimensions;b.devices.length>1;)b.devices[b.devices.length-1].destroy(),b.devices.pop();"landscape"==this.orientation?(this.canvasInnerContainerWidth=i.screenDimensions[this.name].height,this.canvasInnerContainerHeight=i.screenDimensions[this.name].width):(this.canvasInnerContainerWidth=i.screenDimensions[this.name].width,this.canvasInnerContainerHeight=i.screenDimensions[this.name].height),b.isEmbed&&"landscape"==this.orientation&&(this.embedTranslateX=0,this.embedTranslateY=Math.ceil(i.embedTranslations[this.name].y*this.scale/100)),b.devices&&b.devices[0]==this&&(a.search("device",this.name),a.search("scale",this.scale),this.physical||a.search("orientation",this.orientation))};var q=!1;this.requestSession=function(){if(b.app&&0===b.app.publicKey.indexOf("ag_")&&"hammerhead"===this.name)return void toastr.warning("App groups not supported on Nexus 5 Physical");if(!(this.connection||this.queue||q))if(this.selectedRequestId,this.networkLog={},this.networkLogSimple={},this.chromeDevToolsUrl=null,this.cleanConnection(),this.clientController&&this.clientController.io&&this.clientController.io.engine){toastr.remove(),q=!0;var a={debug:this.debug,deviceType:this.name,rotation:this.rotation,params:this.params,plistEdit:this.plistEdit,noVideo:this.noVideo,enableAdb:this.enableAdb,language:this.language,locale:this.locale,location:this.location,launchUrl:this.launchUrl,proxy:this.proxy,osVersion:this.osVersion,timestamp:Date.now(),referrer:document.referrer||document.location.href,xdocMsg:this.xdocMsg,autoplay:this.autoplay,region:this.region};b.app&&b.app.privateKey?(a.publicKey=b.app.publicKey,a.privateKey=b.app.privateKey,b.recordEvent("debug_"+this.name+"_session_requested")):b.app&&b.app.publicKey?(a.publicKey=b.app.publicKey,b.recordEvent("app_"+this.name+"_session_requested")):b.isStandalone?(a.publicKey="standalone",
b.recordEvent("standalone_"+this.name+"_session_requested")):(a.publicKey="demo",b.recordEvent("demo_"+this.name+"_session_requested")),d.post("/api/session/request",{data:a,socketid:this.clientController.io.engine.id})["catch"](function(a){toastr.error("Error requesting session")}),this.notFirstRequest=!0,"true"==c.xdocMsg&&window.parent.postMessage("sessionRequested","*"),setTimeout(function(){q=!1},500)}else toastr.error("Error requesting session")},this.updateScale=function(a){this.scale=a,this.updateScaledWidthsAndHeights()},this.sendHeartbeatsToOtherDevices=function(){for(var a=0;a<b.devices.length;a++)b.devices[a]!==this&&b.devices[a].heartbeat()},this.endSession=function(a){c.endSessionRedirectUrl?window.location.href=c.endSessionRedirectUrl:(a&&a.timeLimitElapsed&&a.timeLimit&&(b.app||toastr.info("Demo has a "+a.timeLimit+" second time limit")),this.cleanConnections(),b.$$phase||b.$apply(function(){}))};var r;this.connect=function(a){var d=this;if(d.connection=!0,b.$apply(function(){}),a.path&&a.sessionToken){this.appetizer&&this.appetizer.disconnect(),this.appetizer=io.connect(a.path,{query:"sessionToken="+a.sessionToken,multiplex:!1,reconnection:!1}),this.connectionString=a.path,this.connectionToken=a.sessionToken,"watch"==this.type&&"watch"!=b.devices[0].type&&b.devices[0].appetizer?this.connectWatch(b.devices[0].connectionString,b.devices[0].connectionToken):b.devices[1]&&"watch"!=this.type&&"watch"==b.devices[1].type&&b.devices[1].appetizer&&b.devices[1].connectWatch(this.connectionString,this.connectionToken),this.appetizer.on("userError",function(a){"true"==c.xdocMsg&&window.parent.postMessage("userError","*"),a.requiresArm?(d.updateDevice(b.deviceConfig.androidDefaultNoX86),toastr.warning('APK has native code but does not have x86 architecture. Switching device type to physical Nexus 5, aka "hammerhead". Please try again.')):a.message?toastr.error(a.message):toastr.error("There was an error loading your app"),d.cleanConnection(),b.recordEvent("user_error_on_requested_session"),b.$apply(function(){})}),this.appetizer.on("timeoutWarning",function(a){"true"==c.xdocMsg&&window.parent.postMessage("timeoutWarning","*"),d.timeoutWarning=!0,b.$apply(function(){})}),this.appetizer.on("countdownWarning",function(a){"true"==c.xdocMsg&&window.parent.postMessage("countdownWarning","*"),d.countdownWarning=a.secondsRemaining,d.countdownWarningInterval=h(function(){0==d.countdownWarning&&angular.isDefined(d.countdownWarningInterval)?h.cancel(d.countdownWarningInterval):d.countdownWarning--},1e3),b.$apply(function(){})}),this.appetizer.on("timeLimitCountdown",function(a){"true"==c.xdocMsg&&window.parent.postMessage({type:"timeLimitCountdown",value:a.secondsRemaining},"*"),d.timeLimitCountdown=a.secondsRemaining-.5,d.timeLimitCountdownTotal=a.secondsRemaining,d.timeLimitCountdownInterval=h(function(){d.timeLimitCountdown<=1&&angular.isDefined(d.timeLimitCountdownInterval)?(h.cancel(d.timeLimitCountdownInterval),d.timeLimitCountdown=0):d.timeLimitCountdown=d.timeLimitCountdown-1},1e3),b.$apply(function(){})}),this.appetizer.on("userInteractionReceived",function(a){d.timeoutWarning=!1,angular.isDefined(d.countdownWarningInterval)&&h.cancel(d.countdownWarningInterval),d.countdownWarning=null,toastr.remove(),b.$apply(function(){}),"true"==c.xdocMsg&&window.parent.postMessage("userInteractionReceived","*")}),this.appetizer.on("debug",function(a){"true"==c.xdocMsg&&window.parent.postMessage({type:"debug",message:a.message},"*"),d.debugConsole+=a.message,b.$apply(function(){})}),this.appetizer.on("appLaunch",function(a){d.appLaunch=!0,d.showPostSession=!0,"true"==c.xdocMsg&&window.parent.postMessage("appLaunch","*"),b.$apply(function(){}),d.journeyPlayback&&("true"==c.xdocMsg&&window.parent.postMessage("journeyPlaybackStarted","*"),k(d.journeyPlayback,0,5e3))}),this.appetizer.on("interceptRequest",function(a){d.networkLog[a.requestId]||(d.networkLog[a.requestId]=a),d.networkLogSimple[a.requestId]||(d.networkLogSimple[a.requestId]={name:a.request.url,status:"(pending)"})}),this.appetizer.on("interceptResponse",function(a){d.networkLog[a.requestId]=a,d.networkLogSimple[a.requestId]={name:a.request.url,status:a.response.status,type:a.response.content.mimeType.split(";").shift(),size:a.response.bodySize/1024,time:a.time}}),this.appetizer.on("interceptError",function(a){d.networkLog[a.requestId]=a,d.networkLogSimple[a.requestId]={name:a.request.url,status:"(failed)"}}),this.appetizer.on("devtoolsConnection",function(a){var b,c;a.secure?(b="https://",c="1"):(b="http://",c="0"),d.chromeDevToolsUrl=b+i.chromeDevToolsBaseUrl+"?ws="+a.url+"&secure="+c}),this.appetizer.on("adbOverTcp",function(a){d.adbConnectionInfo=a,b.$apply(function(){}),g(function(){e.find("pre code").each(function(a,b){f.hljs.highlightBlock(b)})},100)}),this.appetizer.on("disconnect",function(a){d.endSession()}),this.appetizer.on("endSession",function(a){d.endSession(a)}),this.appetizer.on("setRotation",function(a){d.setRotation(a.rotation),b.$apply(function(){})}),this.appetizer.on("frameData",function(a){d.appetizer&&d.appetizer.emit("frameReceived",{hash:a.hash}),d.firstFrameReceived||("true"==c.xdocMsg&&window.parent.postMessage("firstFrameReceived","*"),d.firstFrameReceived=!0,b.$apply(function(){})),r=a.buffer;var e=document.getElementById(d.canvasId);if(e){var f=e.getContext("2d"),g=new Uint8Array(a.buffer),h=uint8ArrayToString(g),i=btoa(h),j=new Image;j.onload=function(){var a=0,b=0;f.clearRect(0,0,2e3,2e3),f.drawImage(this,a,b)},j.src="data:image/jpeg;base64,"+i,d.physical||setTimeout(function(){j.width>j.height&&"portrait"==d.orientation?(d.rotation+=o,o=0,d.rotation%=360,d.orientation="landscape",d.rotation%180!=90&&(d.rotation=270),d.rotateDisabled=!1,d.updateScaledWidthsAndHeights(),console.log("orientationChanged: landscape"),"true"==c.xdocMsg&&window.parent.postMessage({type:"orientationChanged",value:"landscape"},"*"),b.$apply(function(){})):j.height>j.width&&"landscape"==d.orientation&&(d.rotation+=o,o=0,d.rotation%=360,d.orientation="portrait",d.rotation%180!=0&&(d.rotation=0),d.rotateDisabled=!1,d.updateScaledWidthsAndHeights(),console.log("orientationChanged: portrait"),"true"==c.xdocMsg&&window.parent.postMessage({type:"orientationChanged",value:"portrait"},"*"),b.$apply(function(){}))},20)}}),"watch"!=d.type&&($(document).off("keyup").keyup(function(a){return 18===a.which?void(d.altKey=!1):void 0}),$(document).off("keypress").keypress(function(a){a.preventDefault()}),$(document).off("keydown").keydown(function(a){if(!a.metaKey&&!a.ctrlKey||86!=a.which){var b,c;switch(a.which){case 18:return void(d.altKey=!0);case 12:case 16:case 17:case 33:case 34:case 91:case 93:case 27:case 46:case 106:case 107:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 124:case 127:return;case 8:case 9:case 32:c=!0,b=String.fromCharCode(a.which);break;case 37:c=!0,b="leftArrow";break;case 38:c=!0,b="upArrow";break;case 39:c=!0,b="rightArrow";break;case 40:c=!0,b="downArrow";break;case 186:b=";";break;case 187:b="=";break;case 188:b=",";break;case 189:b="-";break;case 190:b=".";break;case 191:b="/";break;case 192:b="`";break;case 219:b="[";break;case 220:b="\\";break;case 221:b="]";break;case 222:b="'";break;default:b=String.fromCharCode(a.which)}b&&(c&&a.preventDefault(),d.emitUserInteraction({type:"keypress",which:a.which,shiftKey:a.shiftKey+"",key:b,timeStamp:a.timeStamp}),d.sendHeartbeatsToOtherDevices())}}));var j=0,l=10,m=0,n=0;$(document).mousedown(function(a){if(a.target.id!=d.canvasId){if(b.devices&&b.devices.length>1)for(var c=0;c<b.devices.length;c++)if(a.target.id==b.devices[c].canvasId)return;$(document).off("mouseup").mouseup(function(a){})}}),$("#"+d.canvasId).off("mousedown").mousedown(function(a){var b=a.offsetX||100/d.scale*(a.clientX-$(a.target).offset().left+window.pageXOffset),c=a.offsetY||100/d.scale*(a.clientY-$(a.target).offset().top+window.pageYOffset);d.emitUserInteraction({type:a.type,timeStamp:a.timeStamp,xPos:b,yPos:c,altKey:d.altKey}),d.sendHeartbeatsToOtherDevices(),$(document).off("mousemove").mousemove(function(a){a.preventDefault();var b=Date.now();if(b>j+l){j=b;var c=a.offsetX||100/d.scale*(a.clientX-$(a.target).offset().left+window.pageXOffset),e=a.offsetY||100/d.scale*(a.clientY-$(a.target).offset().top+window.pageYOffset);a.target.id==d.canvasId&&c>=0&&c<=$(".canvas-inner-container."+d.canvasId).width()&&e>=0&&e<=$(".canvas-inner-container."+d.canvasId).height()&&(m=c,n=e,d.emitUserInteraction({type:a.type,timeStamp:a.timeStamp,xPos:c,yPos:e,altKey:d.altKey}))}}),$(document).off("mouseup").mouseup(function(a){$(document).off("mousemove");var b=a.offsetX||100/d.scale*(a.clientX-$(a.target).offset().left+window.pageXOffset),c=a.offsetY||100/d.scale*(a.clientY-$(a.target).offset().top+window.pageYOffset);a.target.id==d.canvasId&&b>=0&&b<=$(".canvas-inner-container."+d.canvasId).width()&&c>=0&&c<=$(".canvas-inner-container."+d.canvasId).height()?d.emitUserInteraction({appetizerID:d.appetizerID,type:a.type,timeStamp:a.timeStamp,xPos:b,yPos:c,altKey:d.altKey}):d.emitUserInteraction({appetizerID:d.appetizerID,type:a.type,timeStamp:a.timeStamp,xPos:m,yPos:n,altKey:d.altKey}),d.sendHeartbeatsToOtherDevices()})}),$(document).on("touchstart",function(a){if(a.target.id!=d.canvasId){if(b.devices&&b.devices.length>1)for(var c=0;c<b.devices.length;c++)if(a.target.id==b.devices[c].canvasId)return;$(document).off("touchend").on("touchend",function(a){})}}),$("#"+d.canvasId).off("touchstart").on("touchstart",function(a){$("#"+d.canvasId).off("mousedown");var b=a.originalEvent.changedTouches[0],c=$("#"+d.canvasId).offset(),e=100/d.scale*(b.pageX-c.left),f=100/d.scale*(b.pageY-c.top);d.emitUserInteraction({type:"mousedown",timeStamp:a.timeStamp,xPos:e,yPos:f}),d.sendHeartbeatsToOtherDevices(),$(document).off("touchmove").on("touchmove",function(a){a.preventDefault();var b=Date.now();if(b>j+l){j=b;var c=a.originalEvent.changedTouches[0],e=$("#"+d.canvasId).offset(),f=100/d.scale*(c.pageX-e.left),g=100/d.scale*(c.pageY-e.top);a.target.id==d.canvasId&&f>=0&&f<=$(".canvas-inner-container."+d.canvasId).width()&&g>=0&&g<=$(".canvas-inner-container."+d.canvasId).height()&&(m=f,n=g,d.emitUserInteraction({type:"mousemove",timeStamp:a.timeStamp,xPos:f,yPos:g}))}}),$(document).off("touchend").on("touchend",function(a){$(document).off("touchmove");var b=a.originalEvent.changedTouches[0],c=$("#"+d.canvasId).offset(),e=100/d.scale*(b.pageX-c.left),f=100/d.scale*(b.pageY-c.top);a.target.id==d.canvasId&&e>=0&&e<=$(".canvas-inner-container."+d.canvasId).width()&&f>=0&&f<=$(".canvas-inner-container."+d.canvasId).height()?d.emitUserInteraction({appetizerID:d.appetizerID,type:"mouseup",timeStamp:a.timeStamp,xPos:e,yPos:f}):d.emitUserInteraction({appetizerID:d.appetizerID,type:"mouseup",timeStamp:a.timeStamp,xPos:m,yPos:n}),d.sendHeartbeatsToOtherDevices()})})}},this.initialize(j),this.downloadInteractionHistory=function(){var a=new Blob([JSON.stringify(this.interactionHistory)],{type:"application/json"});saveAs(a,getFormattedDate()+" interaction history.json")},this.downloadInteractionHistorySimple=function(){var a=new Blob([JSON.stringify(this.interactionHistorySimple)],{type:"application/json"});saveAs(a,getFormattedDate()+" interaction history simple.json")},this.addInteractionToHistory=function(a){this.interactionHistory.push(jQuery.extend({},a)),"mousemove"!==a.type&&("keypress"!==a.type||-1!==b.broadcastInteractionsConstants.controlKeys.indexOf(a.which)||"home"===a.key||(a.key=b.getCharFromKeypress(a),a.key))&&("keypress"==a.type&&-1===b.broadcastInteractionsConstants.controlKeys.indexOf(a.which)&&"home"!==a.key?n&&"string"==n.type?(n.value+=a.key,this.interactionHistorySimple[this.interactionHistorySimple.length-1]=n):(n={type:"string",timeStamp:a.timeStamp,value:a.key},this.interactionHistorySimple.push(n)):(this.interactionHistorySimple.push(a),n=a))},this.playBackSequence=function(a,b,c){k(a,b,c)}};return j}]);var defaults={deviceDimensions:{hammerhead:{width:600,height:1193}},screenDimensions:{hammerhead:{width:540,height:960}},screenPositions:{hammerhead:{0:{top:100.5,left:30},90:{top:325.5,left:-171},180:{top:115.5,left:30},270:{top:325.5,left:-186},rotateButtons:{width:140,height:140,portrait:{bottom:-90,right:-90},landscape:{bottom:195,right:-375}}}},embedTranslations:{hammerhead:{x:300,y:-294}}};angular.module("appetizeApp").constant("appConstants",{chromeDevToolsBaseUrl:"s3.amazonaws.com/appetize-static/chrome-devtools/release/inspector.html",deviceDimensions:{iphone:{width:365,height:782},ipad:{width:864,height:1287},iphone4s:{width:370,height:733},iphone5s:{width:365,height:782},iphone6:{width:416,height:870},iphone6plus:{width:690,height:1420},ipadair:{width:864,height:1287},iphone6s:{width:416,height:870},iphone6splus:{width:690,height:1420},iphone7:{width:416,height:870},iphone7plus:{width:690,height:1420},ipadair2:{width:864,height:1287},nexus5:{width:400,height:795},nexus7:{width:728,height:1268},nexus9:{width:866,height:1288},wearsquare:{width:336,height:688},wearround:{width:359,height:550},hammerhead:defaults.deviceDimensions.hammerhead,amazon:defaults.deviceDimensions.hammerhead,sam:defaults.deviceDimensions.hammerhead,hammerhead_persist1:defaults.deviceDimensions.hammerhead,flo:{width:728,height:1268},ruby:{width:655,height:1292},hercules:{width:585,height:1064}},screenDimensions:{iphone:{width:320,height:568},ipad:{width:768,height:1024},iphone4s:{width:320,height:480},iphone5s:{width:320,height:568},iphone6:{width:375,height:668},iphone6plus:{width:621,height:1104},ipadair:{width:768,height:1024},iphone6s:{width:375,height:668},iphone6splus:{width:621,height:1104},iphone7:{width:375,height:668},iphone7plus:{width:621,height:1104},ipadair2:{width:768,height:1024},nexus5:{width:360,height:640},nexus7:{width:600,height:960},nexus9:{width:768,height:1024},wearsquare:{width:280,height:280},wearround:{width:320,height:320},hammerhead:defaults.screenDimensions.hammerhead,amazon:defaults.screenDimensions.hammerhead,sam:defaults.screenDimensions.hammerhead,hammerhead_persist1:defaults.screenDimensions.hammerhead,flo:{width:600,height:960},ruby:{width:540,height:960},hercules:{width:480,height:800}},screenPositions:{iphone:{0:{top:105,left:22},90:{top:230,left:-103},180:{top:105,left:22},270:{top:230,left:-100},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-188px",top:"initial",right:"initial",bottom:"361px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-178px",bottom:"361px"}},homeButtonDimensions:{width:60,height:60}},ipad:{0:{top:130,left:48},90:{top:262,left:-82},180:{top:130,left:48},270:{top:262,left:-82},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"30px"},90:{width:"50px",left:"-180px",top:"initial",right:"initial",bottom:"612px"},180:{width:"100%",left:"initial",top:"30px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-170px",bottom:"612px"}},homeButtonDimensions:{width:60,height:60}},ipadair:{0:{top:130,left:48},90:{top:262,left:-82},180:{top:130,left:48},270:{top:262,left:-82},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"30px"},90:{width:"50px",left:"-180px",top:"initial",right:"initial",bottom:"612px"},180:{width:"100%",left:"initial",top:"30px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-170px",bottom:"612px"}},homeButtonDimensions:{width:60,height:60}},ipadair2:{0:{top:130,left:48},90:{top:262,left:-82},180:{top:130,left:48},270:{top:262,left:-82},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"30px"},90:{width:"50px",left:"-180px",top:"initial",right:"initial",bottom:"612px"},180:{width:"100%",left:"initial",top:"30px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-170px",bottom:"612px"}},homeButtonDimensions:{width:60,height:60}},iphone4s:{0:{top:125,left:25},90:{top:206,left:-53},180:{top:127,left:25},270:{top:206,left:-57},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:125,right:-240}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-148px",top:"initial",right:"initial",bottom:"337px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-138px",bottom:"337px"}},homeButtonDimensions:{width:60,height:60}},iphone5s:{0:{top:105,left:22},90:{top:230,left:-103},180:{top:105,left:22},270:{top:230,left:-100},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:150,right:-270}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-188px",top:"initial",right:"initial",bottom:"361px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-178px",bottom:"361px"}},homeButtonDimensions:{width:60,height:60}},iphone6:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone6plus:{0:{top:160,left:35},90:{top:400,left:-205},180:{top:160,left:33},270:{top:400,left:-208},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:290,right:-430}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-330px",top:"initial",right:"initial",bottom:"665px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-290px",bottom:"665px"}},homeButtonDimensions:{width:90,height:90}},iphone6s:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone6splus:{0:{top:160,left:35},90:{top:400,left:-205},180:{top:160,left:33},270:{top:400,left:-208},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:290,right:-430}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-330px",top:"initial",right:"initial",bottom:"665px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-290px",bottom:"665px"}},homeButtonDimensions:{width:90,height:90}},iphone7:{0:{top:100,left:21},90:{top:247,left:-126},180:{top:100,left:21},270:{top:247,left:-126},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:160,right:-290}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"20px"},90:{width:"50px",left:"-205px",top:"initial",right:"initial",bottom:"405px"},180:{width:"100%",left:"initial",top:"20px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-195px",bottom:"405px"}},homeButtonDimensions:{width:60,height:60}},iphone7plus:{0:{top:160,left:35},90:{top:400,left:-205},180:{top:160,left:33},270:{top:400,left:-208},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:290,right:-430}},homeButtonContainer:{0:{width:"100%",left:"initial",top:"initial",right:"initial",bottom:"35px"},90:{width:"50px",left:"-330px",top:"initial",right:"initial",bottom:"665px"},180:{width:"100%",left:"initial",top:"35px",right:"initial",bottom:"initial"},270:{width:"50px",left:"initial",top:"initial",right:"-290px",bottom:"665px"}},homeButtonDimensions:{width:90,height:90}},nexus5:{0:{top:67,left:20},90:{top:217,left:-114},180:{top:77,left:20},270:{top:217,left:-124},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:130,right:-250}}},nexus7:{0:{top:155,left:64},90:{top:334,left:-117},180:{top:153,left:64},270:{top:334,left:-115},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:205,right:-330}}},nexus9:{0:{top:133,left:49},90:{top:260,left:-80},180:{top:131,left:49},270:{top:260,left:-78},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:140,right:-290}}},wearsquare:{0:{top:202,left:27},90:{top:0,left:0},180:{top:0,left:0},270:{top:0,left:0},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:130,right:-250}}},wearround:{0:{top:114,left:20},90:{top:0,left:0},180:{top:0,left:0},270:{top:0,left:0},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:130,right:-250}}},hammerhead:defaults.screenPositions.hammerhead,amazon:defaults.screenPositions.hammerhead,sam:defaults.screenPositions.hammerhead,hammerhead_persist1:defaults.screenPositions.hammerhead,flo:{0:{top:155,left:64},90:{top:334,left:-117},180:{top:153,left:64},270:{top:334,left:-115},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:205,right:-330}}},ruby:{0:{top:150,left:56},90:{top:375,left:-138},180:{top:180,left:58},270:{top:375,left:-172},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:205,right:-330}}},hercules:{0:{top:132,left:53},90:{top:293,left:-108},180:{top:132,left:52},270:{top:291,left:-108},rotateButtons:{width:140,height:140,portrait:{bottom:-60,right:-60},landscape:{bottom:190,right:-290}}}},embedTranslations:{iphone:{x:210,y:-208},ipad:{x:212,y:-210},iphone4s:{x:184,y:-180},iphone5s:{x:210,y:-208},iphone6:{x:228,y:-226},iphone6plus:{x:365,y:-364},ipadair:{x:212,y:-210},iphone6s:{x:228,y:-226},iphone6splus:{x:365,y:-364},iphone7:{x:228,y:-226},iphone7plus:{x:365,y:-364},ipadair2:{x:212,y:-210},nexus5:{x:200,y:-196},nexus7:{x:268,y:-272},nexus9:{x:212,y:-210},wearsquare:{x:0,y:0},wearround:{x:0,y:0},hammerhead:defaults.embedTranslations.hammerhead,flo:{x:268,y:-272},ruby:{x:268,y:-272},hercules:{x:218,y:-260}},tabletDevices:["ipad","iphone6plus","ipadair","iphone6splus","iphone7plus","ipadair2","nexus7","nexus9","hammerhead","flo","ruby","amazon","sam","hammerhead_persist1"],physicalDevices:["hammerhead","flo","ruby"],watchDevices:["wearsquare","wearround"],deviceLabels:{iphone4s:"iPhone 4s",iphone5s:"iPhone 5s",iphone6s:"iPhone 6s",iphone6splus:"iPhone 6s+",iphone6:"iPhone 6",iphone6plus:"iPhone 6+",iphone7:"iPhone 7",iphone7plus:"iPhone 7+",ipadair:"iPad Air",ipadair2:"iPad Air 2",nexus5:"Nexus 5",nexus7:"Nexus 7",nexus9:"Nexus 9",hammerhead:"Nexus 5 Physical"}}),angular.module("appetizeApp").filter("reverse",function(){return function(a){return a.slice().reverse()}}),angular.module("appetizeApp").filter("adbconnectioninfo",function(){var a="ssh -fN -o StrictHostKeyChecking=no -p SERVER_PORT USERNAME@HOSTNAME -L6000:FORWARD_DESTINATION:FORWARD_PORT && adb connect localhost:6000";return function(b){if(!b||!b.forwards[0])return null;var c=angular.copy(a);return c=c.replace(/SERVER_PORT/,b.port),c=c.replace(/USERNAME/,b.user),c=c.replace(/HOSTNAME/,b.hostname),c=c.replace(/FORWARD_DESTINATION/,b.forwards[0].destination),c=c.replace(/FORWARD_PORT/,b.forwards[0].port)}}),angular.module("appetizeApp").directive("selectOnDblclick",["$window",function(a){return{link:function(b,c){c.on("dblclick",function(){var b=a.getSelection(),d=document.createRange();d.selectNodeContents(c[0]),b.removeAllRanges(),b.addRange(d)})}}}]),function(){function a(a){function b(b,c,d,e){function f(){var a=h.querySelector("tbody tr:first-child td:first-child");return a&&!a.style.width}function g(){angular.element(h.querySelectorAll("thead, tbody, tfoot")).css("display",""),a(function(){angular.forEach(h.querySelectorAll("tr:first-child th"),function(a,b){var c=h.querySelector("tbody tr:first-child td:nth-child("+(b+1)+")"),d=h.querySelector("tfoot tr:first-child td:nth-child("+(b+1)+")"),e=c?c.offsetWidth:a.offsetWidth;c&&(c.style.width=e+"px"),a&&(a.style.width=e+"px"),d&&(d.style.width=e+"px")}),angular.element(h.querySelectorAll("thead, tfoot")).css("display","block"),angular.element(h.querySelectorAll("tbody")).css({display:"block",height:d.tableHeight||"inherit",overflow:"auto"});var a=h.querySelector("tbody"),b=a.offsetWidth-a.clientWidth;if(b>0){b-=2;var c=h.querySelector("tbody tr:first-child td:last-child");c.style.width=c.offsetWidth-b+"px"}})}var h=c[0];b.$watch(f,function(a){a&&g()})}return{restrict:"A",link:b}}angular.module("anguFixedHeaderTable",[]).directive("fixedHeader",a),a.$inject=["$timeout"]}();